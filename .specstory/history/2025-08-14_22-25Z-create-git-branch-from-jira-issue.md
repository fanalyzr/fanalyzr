<!-- Generated by SpecStory -->

# Create git branch from Jira issue (2025-08-14 22:25Z)

_**User**_

i need to add a cursor ai rule so that whenever a Jira Issue is about to be worked on, a git branch is created and checked out using the naming convention [IssueKey]-[Summary] with spaces in the Summary replaced by dashes to be git compatible.

---

_**Assistant**_

<think><details><summary>Thought Process</summary>**Considering rule creation for commands**

I'm thinking about writing a rule that triggers before working on an issue, specifically to run a terminal command to create a branch and check it out. We have tools to run terminal commands, like functions.run_terminal_cmd, which can work on the user's system. The user wants this rule integrated into Cursor for "about to be worked on" events.

Cursor has "AI Rules" and custom commands that might enable this functionality. We could create a `.cursorrules` file for the specific command needed or use `cursor.json` for custom commands. Alternatively, we could write a function that automatically creates a branch when a Jira issue is selected. It looks like we can utilize the Atlassian MCP server for these operations.
**Creating a rule for branch creation**

I'm focusing on adding a rule for when a Jira issue is set to "In Progress." The idea is that when someone wants to "work on issue KEY," we can prompt to create a branch first by running git commands. The user prefers this to be a rule, so I can add something like a `.cursorrules` file that instructs the assistant to fetch the issue and create the branch.

I'll ensure that the terminal command runs correctly and specifies the workspace path. So, I'll create this `.cursorrules` file at the root with the necessary instructions.
**Setting up instructions for JIRA issues**

I'm planning to write instructions for the assistant to handle JIRA issues when they're about to be worked on. The process involves detecting the issue, parsing the IssueKey and Summary, and creating a git branch with a sanitized name, like `[IssueKey]-[Summary]`. 

I want to convert spaces to dashes and strip disallowed characters for compatibility. While the user specified only replacing spaces, I think it's better to sanitize further. I’ll create either a `.cursorrules` or `cursor-rules.json` file. I'm checking if Cursor supports `.cursorrules` in YAML or markdown format.
**Recalling Cursor AI rules format**

I need to remember that Cursor's AI "rules" file uses Markdown sections. We can create a `.cursorrules` file containing rules formatted as plain text with Markdown. It sounds like we'll categorize these under "Playbooks" or prompts like "When...". 

I’ll write a rule titled "Jira → Git branch convention" with clear steps. Additionally, we need a script to create the branch, and the rule will instruct the assistant to suggest executing the command using the run tool. I might also add a helper Node script in the repo for the branch creation process.
**Implementing OS-specific commands in rules**

I recognize the operating system is Windows, but I want to ensure my rule file can handle cross-platform environments too. While we can run POSIX-style commands, here, there's a need to detect the OS to run the appropriate command. I’ll specify that for Windows, we handle it with PowerShell actions; for bash, we’ll use `git switch -c`.

The rule should remain generalized, so I may also include steps for creating a local branch linked to the remote branch. Additionally, I’m considering incorporating steps into the Atlassian workflow. I’ll create the `.cursorrules` file with these instructions and propose testing it when an issue key is provided, though I won't do heavy explanations.</details></think>

---

I'll add a new Cursor AI rule in a `.cursorrules` file that instructs the assistant to automatically create and check out a git branch whenever work starts on a Jira issue, using the `[IssueKey]-[Summary-with-dashes]` naming convention. I'll include guidance for fetching the issue summary via Jira MCP, sanitizing the branch name (spaces to dashes), and running a PowerShell-safe branch creation/checkout command.

---



---

_**User**_

My rules are located in /.cursor/rules

---

_**Assistant**_

<think><details><summary>Thought Process</summary>**Implementing Cursor AI rules**

I need to implement a Cursor AI rule in the /.cursor/rules directory. The workspace snapshot shows root fanalyzr/ and some subdirectories, but I don't see a .cursor directory. The user mentioned that rules are in /.cursor/rules, so I'll need to create or edit a rule file. It looks like Cursor rules are likely in markdown format. I'll aim to write a file that specifies the rule for starting work on a Jira issue and managing branches, considering the Atlassian MCP integration.
**Adding a Jira rule**

The developer instructions indicate that I can run commands on the user's system using run_terminal_cmd. My immediate goal is to add a rule that creates and checks out a git branch whenever a Jira Issue is about to be worked on. It seems this rule will trigger during Jira operations via MCP. However, since rules are static markdown, I need to craft instructions for the AI to propose commands using the run_terminal_cmd tool effectively.
**Creating a branching rule**

In the rules, I need to instruct the assistant to propose and run a command to create a git branch. This branch name will be derived from the issue key and summary using the Atlassian MCP tool functions.mcp_atlassian_getJiraIssue. I'll sanitize the string and then propose the command `git checkout -b` with the cleaned-up branch name. I'll implement this in a new file at `.cursor/rules/jira-branching.md`, ensuring I maintain the proper indentation and minimal content. Also, we might consider adding a check to see if the branch already exists.
**Drafting the Jira branch rule**

I need to ensure safe sanitization for the branch name by replacing spaces with dashes and removing invalid characters for a git branch name, like `^:?*[`. I’ll stick to the requirement of just replacing spaces but also consider replacing any whitespace with dashes for added safety. Additionally, I should draft a rule to manage the length of the branch name. 

The rule could be titled "Jira Branch Automation" with a scope that specifies when a user starts working on a Jira issue. I'll structure it in Cursor Rule syntax accordingly.
**Creating Jira branch automation rule**

The rule will instruct the AI to detect intent, like if the issue key appears (e.g., ABC-123) or the user says "start ABC-123." It will fetch Jira issue details using Atlassian MCP and build the branch name as `{issueKey}-{kebabSummary}`, without lowercasing since that wasn't specified.

Next, it will propose `git checkout -b "{branchName}"` ensuring it runs in the correct directory. If the branch exists, it will use `git checkout "{branchName}"`. I'll include both PowerShell and POSIX commands in the rule content stored in `.cursor/rules/jira-branch-checkout.md`, with clear markdown sections for structure. The rule will trigger when moving a Jira issue to "In Progress" or specific user commands, ensuring future actions are clearly defined.</details></think>

---

I’m going to add a new rule file under `.cursor/rules` that instructs the assistant to automatically create and check out a git branch when starting work on a Jira issue. The rule will specify how to fetch the issue summary via Jira, construct the branch name `[IssueKey]-[Summary-with-dashes]`, and run a PowerShell-safe command that checks out an existing branch or creates a new one.

---



---

<think><details><summary>Thought Process</summary>**Updating and enhancing rules**

I need to provide a status update since we're adding a rule file and about to run the lint tool. We didn't include a status update before the last tool call, which isn't compliant with the developer agent spec. So, I’ll make sure to add that before the next tool calls. After running read_lints, I’ll also enhance the rule to sanitize characters not allowed in git branches, keeping the user’s requests in mind. Do I need to modify anything else?
**Adding cursor AI rule**

The user requested that I add a cursor AI rule, and I've done that. Now, it's time to summarize the changes concisely and include the file path. I’ll make sure the summary is clear and to the point. After that, I’ll run the read_lints to check for any issues or necessary adjustments. I'm on track, and just need to wrap up this summary before proceeding with the lint checks!</details></think>

---

I'll run a quick linter check on the new rule file to ensure no issues were introduced.

---



---

- Created `.cursor/rules/jira-branch-automation.md` defining an automation rule to:
  - Fetch Jira Issue Summary via Atlassian integration.
  - Build branch name as `[IssueKey]-[Summary-with-dashes]`.
  - Propose and run PowerShell/POSIX-safe commands to checkout or create the branch.
- Verified no linter issues for the new rule file.

This will guide Cursor to create and switch to the correct git branch whenever you start work on a Jira issue.

---

